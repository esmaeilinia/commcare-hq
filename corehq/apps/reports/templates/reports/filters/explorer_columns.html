{% extends 'reports/filters/base.html' %}
{% load hq_shared_tags %}
{% load i18n %}
{% block filter_content %}
    <div class="panel-group" id="case-list-explorer-columns" role="tablist" aria-multiselectable="true">
        <div class="panel panel-default">
            <div class="panel-heading" role="tab">
                <a role="button" data-toggle="collapse" data-parent="#case-list-explorer-columns" href="#columns-editor">
                    <h4 class="panel-title">
                        {% trans "Edit Columns" %}
                        <span class="pull-right" id="panel-chevron">
                            <i class="fa fa-chevron-down"></i>
                        </span>
                    </h4>
                </a>
            </div>
            <div id="columns-editor" class="collapse" role="tabpanel">
                <div class="panel-body">
                    <div class="report-filter-case-property-columns" data-initialvalue="{{ initial_value }}" data-columnsuggestions="{{ column_suggestions }}">
                        <table class="table table-condensed">
                            <thead>
                                <th>&nbsp;</th>
                                <th>{% trans "Property" %}</th>
                                <th>&nbsp;</th>
                            </thead>
                            <tbody data-bind="foreach: properties, sortableList: properties">
                                <tr>
                                    <td>
                                        <i class="grip fa fa-arrows-v icon-blue"></i>
                                    </td>
                                    <td>
                                        <div class="has-feedback">
                                            <input type="text" class="form-control" data-bind="
                                                         value: name,
                                                         explorerColumnsAutocomplete: $parent.suggestedProperties()"
                                            />
                                            <span class="form-control-feedback" data-bind="visible: meta_type">
                                                <span class="label label-primary" data-bind="text: meta_type"></span>
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <i style="cursor: pointer;"
                                           data-bind="click: $parent.removeProperty"
                                           class="fa fa-remove"></i>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <button class="btn btn-default" data-bind="click: addProperty">
                            <i class="fa fa-plus"></i>
                            {% trans "Add Property" %}
                        </button>
                        <input type="hidden" data-bind="value: allProperties" name="{{ slug }}" />
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
